---
alwaysApply: true
description: 繰り返し行う操作をコマンド化することを提案するルール
---

# Command Creation Proposal Rules

開発中に特定の操作を繰り返し行う場合、それをCursorコマンドとして定型化することを提案するルール。

## 提案の判断基準

以下の条件を満たす操作は、コマンド化を検討すべき：

1. **繰り返し実行される操作**
   - 同じ手順を3回以上実行する、または今後も継続的に実行される可能性が高い操作
   - 例: 特定の形式でのファイル作成、定型化されたリファクタリング手順、定期的な検証作業

2. **手順が明確で定型化可能**
   - 実行手順が明確で、パラメータ化やテンプレート化が可能な操作
   - 例: コンポーネントの雛形作成、テストファイルの生成、特定の形式でのドキュメント作成

3. **エラーが発生しやすい操作**
   - 手動で行うとミスが発生しやすい、または手順を忘れやすい操作
   - 例: 複数ファイルの同期更新、特定の設定ファイルの更新、複雑な検証手順

4. **時間がかかる操作**
   - 手動で行うと時間がかかり、自動化することで効率化できる操作
   - 例: 複数ステップの検証、複数ファイルへの同じ変更の適用

## 提案のタイミング

以下のタイミングでコマンド化を提案すること：

- 同じ操作を2回以上繰り返したとき
- ユーザーが「毎回同じことをしている」と感じる操作を発見したとき
- 複雑な手順を実行する前に、それが繰り返し行われる可能性があると判断したとき

## 提案方法

コマンド化を提案する際は、以下の情報を含めること：

1. **操作の説明**: 何を繰り返し行っているか
2. **コマンド化のメリット**: なぜコマンド化すべきか
3. **想定されるコマンド名**: `/my/コマンド名` の形式
4. **コマンドの機能概要**: コマンドが何を行うか

例：
```
この操作は繰り返し行われる可能性が高いため、コマンド化することを提案します。

**操作**: 新しいエンティティクラスの作成（型定義、テストファイル、エクスポートの追加）
**メリット**: 毎回同じ手順を手動で行う必要がなくなり、ミスも減ります
**想定コマンド名**: `/my/create-entity`
**機能**: エンティティ名を指定すると、型定義ファイル、テストファイル、エクスポートを自動生成
```

## コマンド作成の手順

ユーザーがコマンド化に同意した場合、以下の手順でコマンドを作成すること：

1. **コマンドファイルの作成**
   - `.cursor/commands/my/コマンド名.md` を作成
   - Cursorコマンドの形式に従って記述（description、allowed-tools、argument-hint等）

2. **コマンドの実装**
   - `<instructions>`セクションに実行手順を記載
   - 必要なツール（Read、Write、Grep、Bash等）を`allowed-tools`に指定
   - 引数が必要な場合は`argument-hint`を記載

3. **READMEの更新**
   - `.cursor/commands/my/README.md`に新しいコマンドを追加
   - コマンドの説明と使用方法を記載

4. **コミット**
   - サブモジュール側（`.cursor/commands/my/`）でコミット
   - メインリポジトリ側でサブモジュール参照を更新（別コミット）

## コマンドファイルのテンプレート

```markdown
---
description: コマンドの説明
allowed-tools: Read, Write, Grep, Bash
argument-hint: [引数の説明]
---

# コマンド名

<background_information>
- **Mission**: コマンドの目的
- **Success Criteria**: 成功基準
</background_information>

<instructions>
## Core Task
コマンドが実行する主要なタスク

## Execution Steps

### Step 1: 手順1
説明

### Step 2: 手順2
説明

## Critical Constraints
制約事項
</instructions>

## Usage Examples

**引数なし**:
```
/my/コマンド名
```

**引数あり**:
```
/my/コマンド名 引数
```

## Safety & Fallback
安全性に関する注意事項
```

## 注意事項

- **過度な提案を避ける**: 1回限りの操作や、コマンド化のメリットが少ない操作には提案しない
- **ユーザーの判断を尊重**: 提案はあくまで提案であり、ユーザーが不要と判断した場合は従う
- **既存コマンドとの重複を避ける**: 既存のコマンドや標準機能で実現できる場合は、新規コマンドを作成しない
